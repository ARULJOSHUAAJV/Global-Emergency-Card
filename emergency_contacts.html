<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emergency Contacts - Global Emergency Card</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fglobaleme1676back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Emergency Header -->
    <header class="bg-primary text-white shadow-floating sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">Emergency Contacts</h1>
                        <p class="text-red-100 text-sm">Manage Your Emergency Network</p>
                    </div>
                </div>

                <!-- Navigation Menu -->
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="dashboard.html" class="text-red-100 hover:text-white transition-colors duration-200">Dashboard</a>
                    <a href="medical_information.html" class="text-red-100 hover:text-white transition-colors duration-200">Medical Info</a>
                    <a href="emergency_contacts.html" class="text-white font-semibold">Contacts</a>
                    <a href="country_emergency_numbers.html" class="text-red-100 hover:text-white transition-colors duration-200">Emergency Numbers</a>
                    <a href="qr_code_generator.html" class="text-red-100 hover:text-white transition-colors duration-200">QR Code</a>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="md:hidden text-white p-2" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden pb-4">
                <div class="flex flex-col space-y-2">
                    <a href="dashboard.html" class="text-red-100 hover:text-white py-2 transition-colors duration-200">Dashboard</a>
                    <a href="medical_information.html" class="text-red-100 hover:text-white py-2 transition-colors duration-200">Medical Info</a>
                    <a href="emergency_contacts.html" class="text-white font-semibold py-2">Contacts</a>
                    <a href="country_emergency_numbers.html" class="text-red-100 hover:text-white py-2 transition-colors duration-200">Emergency Numbers</a>
                    <a href="qr_code_generator.html" class="text-red-100 hover:text-white py-2 transition-colors duration-200">QR Code</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Quick Dial Section -->
        <section class="mb-8">
            <div class="bg-primary-50 border-l-4 border-primary rounded-lg p-6 animate-fade-in">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <h2 class="text-2xl font-bold text-primary">Quick Dial</h2>
                            <p class="text-text-secondary mt-1">Top 3 priority contacts for immediate access</p>
                        </div>
                    </div>
                    <a href="emergency_quick_access.html" class="inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
                        </svg>
                        Emergency Mode
                    </a>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Quick Dial Contact 1 -->
                    <div class="bg-white rounded-lg p-4 border border-primary-200">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <svg class="w-8 h-8 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                            </div>
                            <h3 class="font-bold text-text-primary">John Smith</h3>
                            <p class="text-text-secondary text-sm mb-3">Spouse</p>
                            <button class="emergency-button w-full text-lg" onclick="callContact('+15550123', 'John Smith')">
                                Call Now
                            </button>
                        </div>
                    </div>

                    <!-- Quick Dial Contact 2 -->
                    <div class="bg-white rounded-lg p-4 border border-secondary-200">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-secondary-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <svg class="w-8 h-8 text-secondary" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                </svg>
                            </div>
                            <h3 class="font-bold text-text-primary">Dr. Sarah Johnson</h3>
                            <p class="text-text-secondary text-sm mb-3">Primary Doctor</p>
                            <button class="bg-secondary text-white font-semibold py-3 px-6 rounded-lg hover:bg-secondary-700 transition-colors duration-200 w-full" onclick="callContact('+15550456', 'Dr. Sarah Johnson')">
                                Call Doctor
                            </button>
                        </div>
                    </div>

                    <!-- Quick Dial Contact 3 -->
                    <div class="bg-white rounded-lg p-4 border border-success-200">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <svg class="w-8 h-8 text-success" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A2.996 2.996 0 0 0 17.06 7c-.8 0-1.54.5-1.85 1.26l-1.92 5.77c-.24.72.16 1.5.89 1.73L15.5 16v6h4.5z"/>
                                </svg>
                            </div>
                            <h3 class="font-bold text-text-primary">Maria Garcia</h3>
                            <p class="text-text-secondary text-sm mb-3">Sister</p>
                            <button class="bg-success text-white font-semibold py-3 px-6 rounded-lg hover:bg-success-700 transition-colors duration-200 w-full" onclick="callContact('+15550789', 'Maria Garcia')">
                                Call Family
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Management Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Contact List -->
            <div class="lg:col-span-2">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-text-primary">Emergency Contacts</h2>
                    <div class="flex items-center space-x-3">
                        <button onclick="importContacts()" class="inline-flex items-center px-4 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-700 transition-colors duration-200">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                            </svg>
                            Import
                        </button>
                        <button onclick="showAddContactForm()" class="inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-700 transition-colors duration-200">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                            </svg>
                            Add Contact
                        </button>
                    </div>
                </div>

                <!-- Contact Cards -->
                <div id="contactsList" class="space-y-4">
                    <!-- Contact Card 1 -->
                    <div class="medical-card border-l-4 border-l-primary draggable-contact" data-contact-id="1" draggable="true">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-text-muted cursor-move drag-handle" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                                    </svg>
                                    <span class="status-indicator success">Priority 1</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-text-primary">John Smith</h3>
                                        <p class="text-text-secondary text-sm">Spouse</p>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="editContact(1)" class="p-2 text-secondary hover:bg-secondary-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                    </svg>
                                </button>
                                <button onclick="deleteContact(1)" class="p-2 text-error hover:bg-error-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Primary:</span>
                                    <span class="font-mono text-text-primary">+1 (555) 0123</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Secondary:</span>
                                    <span class="font-mono text-text-primary">+1 (555) 0124</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Email:</span>
                                    <span class="text-text-primary">john.smith@email.com</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <button class="emergency-button w-full" onclick="callContact('+15550123', 'John Smith')">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                                    </svg>
                                    Call Primary
                                </button>
                                <button class="bg-secondary text-white font-semibold py-2 px-4 rounded-lg hover:bg-secondary-700 transition-colors duration-200 w-full" onclick="sendMessage('john.smith@email.com')">
                                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                    </svg>
                                    Email
                                </button>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                            <p class="text-sm text-text-secondary"><strong>Notes:</strong> Available 24/7. Has spare house key. Knows medical history.</p>
                        </div>
                    </div>

                    <!-- Contact Card 2 -->
                    <div class="medical-card border-l-4 border-l-secondary draggable-contact" data-contact-id="2" draggable="true">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-text-muted cursor-move drag-handle" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                                    </svg>
                                    <span class="status-indicator warning">Priority 2</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-secondary-100 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-text-primary">Dr. Sarah Johnson</h3>
                                        <p class="text-text-secondary text-sm">Primary Doctor</p>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="editContact(2)" class="p-2 text-secondary hover:bg-secondary-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                    </svg>
                                </button>
                                <button onclick="deleteContact(2)" class="p-2 text-error hover:bg-error-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Office:</span>
                                    <span class="font-mono text-text-primary">+1 (555) 0456</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Emergency:</span>
                                    <span class="font-mono text-text-primary">+1 (555) 0457</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Email:</span>
                                    <span class="text-text-primary">s.johnson@medcenter.com</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <button class="bg-secondary text-white font-semibold py-3 px-6 rounded-lg hover:bg-secondary-700 transition-colors duration-200 w-full" onclick="callContact('+15550456', 'Dr. Sarah Johnson')">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                                    </svg>
                                    Call Office
                                </button>
                                <button class="emergency-button w-full" onclick="callContact('+15550457', 'Dr. Sarah Johnson Emergency')">
                                    Emergency Line
                                </button>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                            <p class="text-sm text-text-secondary"><strong>Notes:</strong> Office hours: Mon-Fri 9AM-5PM. Emergency line available 24/7. Familiar with patient medical history.</p>
                        </div>
                    </div>

                    <!-- Contact Card 3 -->
                    <div class="medical-card border-l-4 border-l-success draggable-contact" data-contact-id="3" draggable="true">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-text-muted cursor-move drag-handle" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                                    </svg>
                                    <span class="status-indicator success">Priority 3</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-success-100 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-success" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A2.996 2.996 0 0 0 17.06 7c-.8 0-1.54.5-1.85 1.26l-1.92 5.77c-.24.72.16 1.5.89 1.73L15.5 16v6h4.5z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-text-primary">Maria Garcia</h3>
                                        <p class="text-text-secondary text-sm">Sister</p>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="editContact(3)" class="p-2 text-secondary hover:bg-secondary-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                    </svg>
                                </button>
                                <button onclick="deleteContact(3)" class="p-2 text-error hover:bg-error-50 rounded-lg transition-colors duration-200">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Mobile:</span>
                                    <span class="font-mono text-text-primary">+1 (555) 0789</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Work:</span>
                                    <span class="font-mono text-text-primary">+1 (555) 0790</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-text-secondary">Email:</span>
                                    <span class="text-text-primary">maria.garcia@email.com</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <button class="bg-success text-white font-semibold py-3 px-6 rounded-lg hover:bg-success-700 transition-colors duration-200 w-full" onclick="callContact('+15550789', 'Maria Garcia')">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                                    </svg>
                                    Call Mobile
                                </button>
                                <button class="bg-accent text-white font-semibold py-2 px-4 rounded-lg hover:bg-accent-600 transition-colors duration-200 w-full" onclick="callContact('+15550790', 'Maria Garcia Work')">
                                    Call Work
                                </button>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                            <p class="text-sm text-text-secondary"><strong>Notes:</strong> Lives nearby. Available evenings and weekends. Speaks Spanish and English.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add/Edit Contact Form -->
            <div class="lg:col-span-1">
                <div id="contactForm" class="medical-card sticky top-24">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-text-primary">Add New Contact</h3>
                        <button onclick="resetForm()" class="text-text-secondary hover:text-text-primary transition-colors duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>

                    <form onsubmit="saveContact(event)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Full Name *</label>
                            <input type="text" id="contactName" class="form-input" placeholder="Enter full name" required />
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Relationship *</label>
                            <select id="contactRelationship" class="form-input" required>
                                <option value>Select relationship</option>
                                <option value="spouse">Spouse</option>
                                <option value="parent">Parent</option>
                                <option value="child">Child</option>
                                <option value="sibling">Sibling</option>
                                <option value="friend">Friend</option>
                                <option value="doctor">Doctor</option>
                                <option value="neighbor">Neighbor</option>
                                <option value="colleague">Colleague</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Primary Phone *</label>
                            <input type="tel" id="contactPrimaryPhone" class="form-input" placeholder="+1 (555) 123-4567" required />
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Secondary Phone</label>
                            <input type="tel" id="contactSecondaryPhone" class="form-input" placeholder="+1 (555) 123-4567" />
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Email</label>
                            <input type="email" id="contactEmail" class="form-input" placeholder="contact@email.com" />
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Priority Level</label>
                            <select id="contactPriority" class="form-input">
                                <option value="1">Priority 1 (Highest)</option>
                                <option value="2">Priority 2 (High)</option>
                                <option value="3">Priority 3 (Medium)</option>
                                <option value="4">Priority 4 (Low)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-text-primary mb-2">Special Instructions</label>
                            <textarea id="contactNotes" class="form-input" rows="3" placeholder="Availability, special notes, medical knowledge, etc."></textarea>
                        </div>

                        <div class="flex space-x-3">
                            <button type="submit" class="emergency-button flex-1">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                                Save Contact
                            </button>
                            <button type="button" onclick="resetForm()" class="bg-text-secondary text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors duration-200">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Contact Management Tools -->
                <div class="medical-card mt-6">
                    <h4 class="text-lg font-bold text-text-primary mb-4">Management Tools</h4>
                    <div class="space-y-3">
                        <button onclick="backupContacts()" class="w-full flex items-center justify-center px-4 py-3 bg-secondary-50 text-secondary rounded-lg hover:bg-secondary-100 transition-colors duration-200">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            Backup Contacts
                        </button>
                        <button onclick="restoreContacts()" class="w-full flex items-center justify-center px-4 py-3 bg-success-50 text-success rounded-lg hover:bg-success-100 transition-colors duration-200">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                            </svg>
                            Restore Contacts
                        </button>
                        <button onclick="validateContacts()" class="w-full flex items-center justify-center px-4 py-3 bg-warning-50 text-warning rounded-lg hover:bg-warning-100 transition-colors duration-200">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Validate Numbers
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Floating Emergency Button -->
    <div class="floating-action animate-pulse-emergency" onclick="window.location.href='emergency_quick_access.html'">
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
        </svg>
    </div>

    <!-- JavaScript -->
    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        // Contact management functions
        function callContact(number, name) {
            if (confirm(`Call ${name} at ${number}?`)) {
                window.location.href = `tel:${number}`;
            }
        }

        function sendMessage(email) {
            window.location.href = `mailto:${email}?subject=Emergency Contact&body=This is an emergency contact message.`;
        }

        function editContact(contactId) {
            // Populate form with contact data for editing
            const form = document.getElementById('contactForm');
            const title = form.querySelector('h3');
            title.textContent = 'Edit Contact';
            
            // Mock data population based on contactId
            if (contactId === 1) {
                document.getElementById('contactName').value = 'John Smith';
                document.getElementById('contactRelationship').value = 'spouse';
                document.getElementById('contactPrimaryPhone').value = '+1 (555) 0123';
                document.getElementById('contactSecondaryPhone').value = '+1 (555) 0124';
                document.getElementById('contactEmail').value = 'john.smith@email.com';
                document.getElementById('contactPriority').value = '1';
                document.getElementById('contactNotes').value = 'Available 24/7. Has spare house key. Knows medical history.';
            }
            
            // Scroll to form
            form.scrollIntoView({ behavior: 'smooth' });
        }

        function deleteContact(contactId) {
            if (confirm('Are you sure you want to delete this contact? This action cannot be undone.')) {
                // Remove contact from DOM
                const contactCard = document.querySelector(`[data-contact-id="${contactId}"]`);
                if (contactCard) {
                    contactCard.remove();
                }
                alert('Contact deleted successfully.');
            }
        }

        function saveContact(event) {
            event.preventDefault();
            
            // Get form data
            const formData = {
                name: document.getElementById('contactName').value,
                relationship: document.getElementById('contactRelationship').value,
                primaryPhone: document.getElementById('contactPrimaryPhone').value,
                secondaryPhone: document.getElementById('contactSecondaryPhone').value,
                email: document.getElementById('contactEmail').value,
                priority: document.getElementById('contactPriority').value,
                notes: document.getElementById('contactNotes').value
            };

            // Validate required fields
            if (!formData.name || !formData.relationship || !formData.primaryPhone) {
                alert('Please fill in all required fields.');
                return;
            }

            // Save contact (mock implementation)
            console.log('Saving contact:', formData);
            alert('Contact saved successfully!');
            
            // Reset form
            resetForm();
        }

        function resetForm() {
            const form = document.getElementById('contactForm');
            const title = form.querySelector('h3');
            title.textContent = 'Add New Contact';
            
            // Clear all form fields
            document.getElementById('contactName').value = '';
            document.getElementById('contactRelationship').value = '';
            document.getElementById('contactPrimaryPhone').value = '';
            document.getElementById('contactSecondaryPhone').value = '';
            document.getElementById('contactEmail').value = '';
            document.getElementById('contactPriority').value = '1';
            document.getElementById('contactNotes').value = '';
        }

        function showAddContactForm() {
            resetForm();
            const form = document.getElementById('contactForm');
            form.scrollIntoView({ behavior: 'smooth' });
        }

        // Import/Export functions
        function importContacts() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json,.csv';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const contacts = JSON.parse(e.target.result);
                            console.log('Imported contacts:', contacts);
                            alert('Contacts imported successfully!');
                        } catch (error) {
                            alert('Error importing contacts. Please check file format.');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function backupContacts() {
            const contacts = [
                { name: 'John Smith', relationship: 'spouse', phone: '+15550123' },
                { name: 'Dr. Sarah Johnson', relationship: 'doctor', phone: '+15550456' },
                { name: 'Maria Garcia', relationship: 'sister', phone: '+15550789' }
            ];
            
            const dataStr = JSON.stringify(contacts, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `emergency_contacts_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        function restoreContacts() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const contacts = JSON.parse(e.target.result);
                            console.log('Restored contacts:', contacts);
                            alert('Contacts restored successfully!');
                            location.reload();
                        } catch (error) {
                            alert('Error restoring contacts. Please check file format.');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function validateContacts() {
            // Mock validation
            const invalidNumbers = [];
            const validNumbers = ['+15550123', '+15550456', '+15550789'];
            
            if (invalidNumbers.length === 0) {
                alert('All contact numbers are valid!');
            } else {
                alert(`Found ${invalidNumbers.length} invalid phone numbers. Please review and update.`);
            }
        }

        // Drag and drop functionality
        let draggedElement = null;

        document.addEventListener('DOMContentLoaded', function() {
            const draggableContacts = document.querySelectorAll('.draggable-contact');
            
            draggableContacts.forEach(contact => {
                contact.addEventListener('dragstart', function(e) {
                    draggedElement = this;
                    this.style.opacity = '0.5';
                });
                
                contact.addEventListener('dragend', function(e) {
                    this.style.opacity = '1';
                    draggedElement = null;
                });
                
                contact.addEventListener('dragover', function(e) {
                    e.preventDefault();
                });
                
                contact.addEventListener('drop', function(e) {
                    e.preventDefault();
                    if (draggedElement && draggedElement !== this) {
                        const contactsList = document.getElementById('contactsList');
                        const draggedIndex = Array.from(contactsList.children).indexOf(draggedElement);
                        const targetIndex = Array.from(contactsList.children).indexOf(this);
                        
                        if (draggedIndex < targetIndex) {
                            this.parentNode.insertBefore(draggedElement, this.nextSibling);
                        } else {
                            this.parentNode.insertBefore(draggedElement, this);
                        }
                        
                        // Update priority indicators
                        updatePriorityIndicators();
                    }
                });
            });
        });

        function updatePriorityIndicators() {
            const contacts = document.querySelectorAll('.draggable-contact');
            contacts.forEach((contact, index) => {
                const indicator = contact.querySelector('.status-indicator');
                const priority = index + 1;
                
                indicator.textContent = `Priority ${priority}`;
                indicator.className = 'status-indicator';
                
                if (priority === 1) indicator.classList.add('success');
                else if (priority === 2) indicator.classList.add('warning');
                else indicator.classList.add('error');
            });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Emergency Contacts page loaded');
            
            // Format phone number inputs
            const phoneInputs = document.querySelectorAll('input[type="tel"]');
            phoneInputs.forEach(input => {
                input.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 10) {
                        value = value.replace(/(\d{1})(\d{3})(\d{3})(\d{4})/, '+$1 ($2) $3-$4');
                    }
                    e.target.value = value;
                });
            });
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>
